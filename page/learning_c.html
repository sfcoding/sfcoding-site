<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="../css/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="../css/pygment_trac.css" media="screen" />

    <script src="../js/jquery-2.1.0.min.js"></script>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>

    <title>Learning C</title>
  </head>

  <body>
  <header>
      <div class="container">      
      	<a href="http://www.sfcoding.com/" ><h1>SourceFoundryCoding</h1></a>
        <h2></h2>
        <section id="downloads">
          <a href="https://github.com/sfcoding" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
        </section>
      </div>
    </header>

    <div class="container">
      <aside id="main_content" class='about'>
        <h3>Learning a little C</h3>
        <p></p>
      </aside>

      
      <section>
        <h4>Puntatori</h4>
        <ul>
          <li><a class="aListC" href="#tipi_p">Tipi di puntatore</a></li>
          <li><a class="aListC" href="#op_p">Operazioni sui puntatori</a></li>
          <li><a class="aListC" href="#func_p">Function Pointers</a></li>
        </ul>
      </section>

      <section>
        <h4>Lambda Espressioni</h4>
        <ul>
          <li><a class="aListC" href="#lambdaExample">Esempi</a></li>
        </ul>
      </section>

      <section>
        <div id="tipi_p">
          <p>Citando wikipedia: Nei linguaggi tipizzati, ogni puntatore ha un tipo ben definito, derivato dal tipo dell'oggetto puntato. Così, l'indirizzo di memoria di una variabile di tipo "numero intero" si dirà essere di tipo "puntatore a numero intero", e questo sarà considerato dal linguaggio come un tipo distinto da "puntatore a carattere" o altri tipi puntatore. Il tipo dell'oggetto puntato viene spesso detto tipo base del puntatore (con terminologia analoga a quella usata per gli array). I tipi puntatori possono essere impiegati anche nella dichiarazione di variabili (o in altri contesti analoghi). Per esempio, nel linguaggio C</p>

        </div>

        <div id="op_p">
          <img style="background-color: RGB(210,210,210); display: table; margin: 0 auto;" border="0" src="../images/Puntatore.svg.png" alt="Operazioni sui puntatori"  width="304" height="228">
        </div>

        <div id="func_p">
          <h4>Function Pointers</h4>
          <p>
            Partiamo da un esempio base: <br/>
            il seguente è un semplice codice che scrive il prototipo della funzione, la implementa e la richiama dal main.
          </p>
          <pre style="background-color: RGB(210,210,210);" class="prettyprint">
            #include <stdio.h>;
 
            void sayHello();
             
            void sayHello() {
              printf("hello world");
            }
             
            int main() {
              sayHello();
            }
          </pre>
          <p>Partendo quindi dall'esempio precedente creiamo un puntatore alla funzione "sayHello" e la richiameremo</p>
           <pre style="background-color: RGB(210,210,210);" class="prettyprint">
              int main() {
                void (*sayHelloPtr)() = sayHello;
                (*sayHelloPtr)();
              }
           </pre>
           <p>Allora è possibile creare un puntatore a funzione in questa maniera scrivendo:</p>
          <ul>
            <li>tipo di ritorno</li>
            <li>tra parentesi con * il nome della variabile a cui assegneremo la funzione</li>
            <li>sempre tra parentesi il tipo di dato che prende la funzione</li>
          </ul>
          <pre style="background-color: RGB(210,210,210);" class="prettyprint">
            int test(double a);

            int (*pfunz)(double);

            int ris = pfunz(4.2); //per richiamarlo
          </pre>
          <p>Tutto questo meccanismo è valido solo se le funzioni hanno lo stesso tipo di ritorno e lo stesso numero di parametri dello stesso tipo.
          <br/>
          Di seguito un esempio più articolato:</p>
          <pre style="background-color: RGB(210,210,210);" class="prettyprint">
            #include <stdio.h>
   
            // function prototypes
            int add(int x, int y);
            int subtract(int x, int y);
            int domath(int (*mathop)(int, int), int x, int y);
             
            // add x + y
            int add(int x, int y) {
              return x + y;
            }
             
            // subtract x - y
            int subtract(int x, int y) {
              return x - y;
            }
             
            // run the function pointer with inputs
            int domath(int (*mathop)(int, int), int x, int y) {
              return (*mathop)(x, y);
            }
             
            // calling from main
            int main() {
             
              // call math function with add
              int a = domath(add, 10, 2);
              printf("Add gives: %d\n", a);
             
              // call math function with subtract
              int b = domath(subtract, 10, 2);
              printf("Subtract gives: %d\n", b);
            }
          </pre>
        </div>

        <div id="lambdaExample">
          <h4>Esempio di Lambda Espressione</h4>
          <pre style="background-color: RGB(210,210,210);" class="prettyprint">
            #include <stdio.h>

            void eval(int (*func)(char*)) {
              func("lambda");
              func("expression");
            }

            void main() {
              int (*func)(char*);
              func = ({ int $(char *str){ printf("Test: %s\n", str); } $; });
              eval(func);
            }
          </pre>
        </div>
      </section>
      
    </div>
  </body>
</html>